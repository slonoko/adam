services:
  # Full MCP server with all tools
  mcp:
    build:
      context: ./mcp-server
      dockerfile: Dockerfile
    ports:
      - "8001:8000"
    env_file:
      - mcp-server/.env
    restart: unless-stopped
    networks:
      - adam-network
  adk:
    build:
      context: ./adk
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    env_file:
      - adk/.env  # This reads from host .env file without copying it into the image
    restart: unless-stopped
    networks:
      - adam-network
    depends_on:
      - mcp
  ui:
    build:
      context: ./ui
      dockerfile: Dockerfile
      args:
        VITE_API_URL: http://localhost:8000
        VITE_APP_NAME: tradingadvisor
    ports:
      - "8003:80"
    restart: unless-stopped
    networks:
      - adam-network
    depends_on:
      - adk
networks:
  adam-network:
    driver: bridge